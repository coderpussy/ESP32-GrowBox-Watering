<!DOCTYPE html>
<html>
    <head>
        <title data-translate="title">Growbox Watering</title>
        <meta HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <link rel="icon" type="image/x-icon" href="favicon.ico">
        <link rel="stylesheet" type="text/css" href="css/index.css">
    </head>

    <body>
        <input id="dark-mode" class="dark-mode-checkbox visually-hidden" type="checkbox" />

        <div class="topnav">
            <div class="box box1">
                <div data-translate="title">Growbox Watering</div>
            </div>
            <div class="box box2">
                <div class="calendar-dates toggle-overlay calendar"></div>
                <div class="power-plug toggle-overlay webserial"></div>
                <div class="gear toggle-overlay settings">
                    <div class="bar"></div>
                    <div class="bar"></div>
                    <div class="bar"></div>
                    <div class="gear-inner"></div>
                </div>
                <div>
                    <label class="dark-mode-label" for="dark-mode">
                        <span class="toggle">
                            <span class="circle"></span>
                        </span>
                    </label>
                </div>
                <div class="custom-select">
                    <select id="language-select">
                        <option value="en">English</option>
                        <option value="de">Deutsch</option>
                    </select>
                </div>
            </div>
        </div>

        <div class="theme-container">

            <table>
                <tr>
                    <td style="text-align: center;">
                        <span data-translate="automatic_watering">Automatic Watering:</span><br /><br />
                        <span id="mode"></span>
                        <label class="auto-switch" for="auto_switch">
                            <input type="checkbox" id="auto_switch" />
                            <div class="auto-slider round"></div>
                        </label>
                    </td>
                </tr>
            </table>

            <br />

            <div id="moistureSensorsWrapper">
                <table>
                    <tr><td data-translate="moisture_sensor_1">Moisture Sensor 1:</td><td><span id="sensor_1"></span> &percnt;</td></tr>
                    <tr><td data-translate="moisture_sensor_2">Moisture Sensor 2:</td><td><span id="sensor_2"></span> &percnt;</td></tr>
                    <tr><td data-translate="moisture_sensor_3">Moisture Sensor 3:</td><td><span id="sensor_3"></span> &percnt;</td></tr>
                </table>

                <br />
            </div>

            <table>
                <tr id="valve-controls">
                    <!-- Valve controls will be inserted here dynamically -->
                </tr>
            </table>

            <br />

            <table>
                <tr>
                    <td style="text-align: center;">
                        <span data-translate="water_pump">Water Pump:</span><br /><br />
                        <span id="pump_1"></span>
                        <label class="pump-switch" for="pump_switch">
                            <input type="checkbox" id="pump_switch" />
                            <div class="pump-slider round"></div>
                        </label>
                    </td>
                </tr>
            </table>

            <br />

            <table>
                <tr>
                    <td style="text-align: left;">
                        <span data-translate="runs">Runs:</span>
                        <span><span id="pumpRunTime"></span> <span data-translate="seconds">sec.</span></span>
                    </td>
                    <td>
                        <div id="soilFlowVolumeWrapper">
                            <span data-translate="soil_flow_rate">Soil Flow Rate:</span>
                            <span><span id="soilFlowVolume"></span> <span data-translate="litre">ltr.</span></span>
                        </div>
                    </td>
                </tr>
                <tr>
                    <td colspan="2" style="padding-top: 10px; text-align: center;">
                        <input id="resetCounter" type="button" class="button" data-translate="reset_counter" value="Reset Counter">
                    </td>
                </tr>
            </table>

            <!-- Modal overlay boxes -->
            <div id="overlay-calendar">
                <span class="close toggle-overlay calendar"></span>
                <div class="content">
                    <h1 data-translate="job_scheduler">Job Scheduler</h1>
                    <div class="formcontrols">
                        <div class="job-form">
                            <input type="text" id="job-name" data-translate="job_name_placeholder" placeholder="Enter job name...">
                            <select id="job-select">
                                <option value="watering" data-translate="watering">Watering</option>
                            </select>
                            <select id="plant-select">
                                <option value="all-plants" data-translate="all_plants">All Plants</option>
                                <option value="plant-1" data-translate="plant_1">Plant 1</option>
                                <option value="plant-2" data-translate="plant_2">Plant 2</option>
                                <option value="plant-3" data-translate="plant_3">Plant 3</option>
                            </select>
                            <input type="number" id="job-duration" min="2" max="120" data-translate="job_duration_placeholder" placeholder="e.g. 90" style="width: 70px;" required />
                            <span data-translate="seconds">sec.</span><span class="validity"></span>
                            <input type="datetime-local" id="starttime">
                            <input id="everyday" type="checkbox" /><span data-translate="every_day">all days</span>
                            <input id="add-job" type="button" class="button" data-translate="add_job" value="Add Job" />
                        </div>
                        <div class="job-list" id="job-list">
                            <!-- Tasks will be added here dynamically -->
                        </div>
                        <div class="manage-job-list">
                            <input id="save-jobs" type="button" class="button" data-translate="save_jobs" value="Save Jobs" />
                            <input id="delete-joblist" type="button" class="button" data-translate="delete_joblist" value="Delete Joblist" />
                        </div>
                    </div>
                </div>
            </div>

            <div id="overlay-webserial">
                <span class="close toggle-overlay webserial"></span>
                <div class="content">
                    <div class="formcontrols">
                        <iframe width="600" height="400" src="/webserial"></iframe>
                    </div>
                </div>
            </div>

            <div id="overlay-settings">
                <span class="close toggle-overlay settings"></span>
                <div class="content">
                    <h1 data-translate="settings">Settings</h1>
                    <div class="formcontrols">
                        <table>
                            <tr><td data-translate="use_webserial">Use Webserial:</td><td><input type="checkbox" id="use_webserial"></td></tr>
                            <tr><td data-translate="use_flowsensor">Use Soil Flow Sensor:</td><td><input type="checkbox" id="use_flowsensor"></td></tr>
                            <tr><td data-translate="use_moisturesensor">Use Soil Moisture Sensor:</td><td><input type="checkbox" id="use_moisturesensor"></td></tr>
                            <tr><td data-translate="auto_switch_enabled">Auto switch enabled by default:</td><td><input type="checkbox" id="auto_switch_enabled"></td></tr>
                            <tr><td data-translate="plant_count">Number of Plants:</td><td><input type="number" id="plant_count" min="1" max="8" value="3"></td></tr>
                            <tr><td colspan="2"><small data-translate="plant_count_warning" class="warning-text"></small></td></tr>
                        </table>
                        <p>
                            <input type="button" class="button toggle-overlay settings" data-translate="back" value="Back"> 
                            <input id="savesettings" type="button" class="button" data-translate="set" value="Set"> 
                        </p>
                    </div>
                </div>
            </div>

        </div>
        <script src="js/index.js" type="module"></script>
    </body>
</html>